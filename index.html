<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AthleteSense â€“ Feedback PÃ³s-Treino</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: #0d3b25;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.94);
            color: #0d3b25;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #0d3b25;
            font-size: 24px;
        }
        .info-header {
            background: #e8f5e9;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
            border-left: 4px solid #2e7d32;
        }
        .info-header p {
            margin: 4px 0;
            font-size: 15px;
            color: #0d3b25;
        }
        .question {
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #d0e8d4;
        }
        .question:last-child {
            border-bottom: none;
        }
        .question label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #0d3b25;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .options label {
            display: flex;
            align-items: center;
            font-weight: normal;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: background 0.2s;
            color: #0d3b25;
        }
        .options label:hover {
            background: #f1f8e9;
        }
        .options input[type="radio"],
        .options input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        textarea, input[type="text"], input[type="email"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #a5d6a7;
            border-radius: 8px;
            font-size: 15px;
            resize: vertical;
            min-height: 60px;
            color: #0d3b25;
            background-color: #f8fdf9;
        }
        input[type="text"], input[type="email"] {
            min-height: auto;
        }
        .btn-submit {
            display: block;
            width: 100%;
            padding: 14px;
            background: #2e7d32;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 10px;
        }
        .btn-submit:hover {
            background: #1b5e20;
        }
        .logo {
            text-align: center;
            font-weight: bold;
            font-size: 28px;
            margin-bottom: 15px;
            color: #0d3b25;
        }
        .optional {
            font-size: 13px;
            color: #558b2f;
            font-style: italic;
            margin-top: 4px;
        }
        .success-message {
            background: #e8f5e9;
            color: #1b5e20;
            padding: 12px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
            border: 1px solid #c8e6c9;
            text-align: center;
        }

        .mood-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            margin-top: 8px;
        }
        .mood-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 12px;
            border-radius: 12px;
            background: #f8fdf9;
            border: 2px solid #c8e6c9;
            transition: all 0.2s;
            width: 80px;
            color: #0d3b25;
        }
        .mood-option:hover {
            transform: translateY(-4px);
            border-color: #2e7d32;
        }
        .mood-option.selected {
            border-color: #1b5e20;
            background: #e8f5e9;
            font-weight: bold;
        }
        .mood-option input {
            display: none;
        }
        .mood-emoji {
            font-size: 28px;
            margin-bottom: 6px;
        }
        .mood-label {
            font-size: 12px;
            text-align: center;
            color: #0d3b25;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">AthleteSense</div>
        <h1>QuestionÃ¡rio PÃ³s-Treino</h1>

        <div class="info-header">
            <p><strong>Data/Hora:</strong> <span id="currentTimestamp"></span></p>
        </div>

        <!-- FormulÃ¡rio Netlify -->
        <form name="athlete-feedback" method="POST" data-netlify="true">
            <input type="hidden" name="form-name" value="athlete-feedback" />

            <!-- Nome do atleta (agora como pergunta normal) -->
            <div class="question">
                <label for="athlete_name">Nome do atleta:</label>
                <input type="text" id="athlete_name" name="athlete_name" placeholder="Escreve o teu nome completo" required>
            </div>

            <!-- E-mail do treinador -->
            <div class="question">
                <label for="coach_email">E-mail do teu treinador:</label>
                <input type="email" id="coach_email" name="coach_email" placeholder="ex: treinador@clube.pt" required>
                <p class="optional">Este e-mail serÃ¡ usado apenas para lhe enviar o teu feedback.</p>
            </div>

            <!-- Pergunta 1 -->
            <div class="question">
                <label>O treino de hoje correu bem?</label>
                <div class="options">
                    <label><input type="radio" name="q1" value="Sim" required> Sim</label>
                    <label><input type="radio" name="q1" value="Mais ou menos"> Mais ou menos</label>
                    <label><input type="radio" name="q1" value="NÃ£o"> NÃ£o</label>
                </div>
            </div>

            <!-- Pergunta 2 -->
            <div class="question">
                <label>Como te sentes emocionalmente agora?</label>
                <div class="options">
                    <label><input type="radio" name="q2" value="Motivado/a" required> Motivado/a</label>
                    <label><input type="radio" name="q2" value="Neutro/a"> Neutro/a</label>
                    <label><input type="radio" name="q2" value="Frustrado/a"> Frustrado/a</label>
                    <label><input type="radio" name="q2" value="Desmotivado/a"> Desmotivado/a</label>
                    <label>
                        Outro: <input type="text" name="q2_outro" placeholder="Descreve aqui..." style="width: 70%; margin-left: 8px; display: inline-block; color: #0d3b25;" value="">
                    </label>
                </div>
            </div>

            <!-- Pergunta 3 -->
            <div class="question">
                <label>O treino foi monÃ³tono ou repetitivo?</label>
                <div class="options">
                    <label><input type="radio" name="q3" value="Nada â€“ foi dinÃ¢mico e interessante" required> Nada â€“ foi dinÃ¢mico e interessante</label>
                    <label><input type="radio" name="q3" value="Um pouco"> Um pouco</label>
                    <label><input type="radio" name="q3" value="Bastante â€“ senti tÃ©dio"> Bastante â€“ senti tÃ©dio</label>
                </div>
            </div>

            <!-- Pergunta 4 -->
            <div class="question">
                <label>Como te sentes fisicamente apÃ³s o treino?</label>
                <div class="mood-selector">
                    <div class="mood-option"><div class="mood-emoji">ðŸ˜„</div><div class="mood-label">Excelente</div><input type="radio" name="q4" value="Excelente â€“ cheio de energia"></div>
                    <div class="mood-option"><div class="mood-emoji">ðŸ™‚</div><div class="mood-label">Bem</div><input type="radio" name="q4" value="Bem â€“ um pouco cansado, mas tudo bem"></div>
                    <div class="mood-option"><div class="mood-emoji">ðŸ˜ª</div><div class="mood-label">Cansado</div><input type="radio" name="q4" value="Cansado â€“ foi intenso"></div>
                    <div class="mood-option"><div class="mood-emoji">ðŸ˜´</div><div class="mood-label">Muito cansado</div><input type="radio" name="q4" value="Muito cansado â€“ sinto-me esgotado"></div>
                    <div class="mood-option"><div class="mood-emoji">ðŸ¤•</div><div class="mood-label">Dor/mal-estar</div><input type="radio" name="q4" value="Dor/mal-estar"></div>
                </div>
            </div>

            <!-- Pergunta 5 -->
            <div class="question">
                <label>O que melhoravas no treino de hoje? (Escolhe atÃ© 2 opÃ§Ãµes)</label>
                <div class="options">
                    <label><input type="checkbox" name="q5" value="Mais jogos/competiÃ§Ã£o"> Mais jogos/competiÃ§Ã£o</label>
                    <label><input type="checkbox" name="q5" value="Mais tempo para corrigir erros"> Mais tempo para corrigir erros</label>
                    <label><input type="checkbox" name="q5" value="Mais variedade de exercÃ­cios"> Mais variedade de exercÃ­cios</label>
                    <label><input type="checkbox" name="q5" value="Mais tempo de recuperaÃ§Ã£o"> Mais tempo de recuperaÃ§Ã£o</label>
                    <label><input type="checkbox" name="q5" value="Mais atenÃ§Ã£o individual do treinador"> Mais atenÃ§Ã£o individual do treinador</label>
                    <label>
                        <input type="checkbox" name="q5_other">
                        Outro: <input type="text" name="q5_other_text" placeholder="Descreve aqui..." style="width: 60%; margin-left: 8px; display: inline-block; color: #0d3b25;" value="">
                    </label>
                </div>
            </div>

            <!-- Pergunta 6 -->
            <div class="question">
                <label>Para ti, o que precisas melhorar ou trabalhar mais nos treinos?</label>
                <textarea name="q6" placeholder="Ex: Quero melhorar os cruzamentos..." required></textarea>
            </div>

            <!-- Pergunta 7 -->
            <div class="question">
                <label>HÃ¡ algo que queiras partilhar com o treinador que nÃ£o foi abordado aqui?</label>
                <span class="optional">(Opcional)</span>
                <textarea name="q7" placeholder="Ex: Senti dores no tornozelo..."></textarea>
            </div>

            <button type="submit" class="btn-submit">ðŸ“¤ Enviar Feedback ao Treinador</button>
        </form>

        <div id="successMessage" class="success-message">
            âœ… Feedback enviado com sucesso ao teu treinador!
        </div>
    </div>

    <script>
        // Definir timestamp atual
        const now = new Date();
        const timestampStr = `${now.toLocaleDateString('pt-PT')}, ${now.toLocaleTimeString('pt-PT', { hour12: false })}`;
        document.getElementById('currentTimestamp').textContent = timestampStr;

        // === LÃ³gica interativa ===
        const q2Inputs = document.querySelectorAll('input[name="q2"]');
        const q2OutroField = document.querySelector('input[name="q2_outro"]');
        q2OutroField.disabled = true;
        q2Inputs.forEach(radio => {
            radio.addEventListener('change', () => {
                q2OutroField.disabled = radio.value !== "Outro";
                if (!q2OutroField.disabled) q2OutroField.focus();
            });
        });

        document.querySelectorAll('.mood-option').forEach(option => {
            option.addEventListener('click', () => {
                document.querySelectorAll('.mood-option').forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                option.querySelector('input[type="radio"]').checked = true;
            });
        });

        const otherCheck = document.querySelector('input[name="q5_other"]');
        const otherText = document.querySelector('input[name="q5_other_text"]');
        otherText.disabled = true;
        otherCheck.addEventListener('change', () => {
            otherText.disabled = !otherCheck.checked;
            if (otherCheck.checked) otherText.focus();
        });

        const q5Checkboxes = document.querySelectorAll('input[name="q5"], input[name="q5_other"]');
        q5Checkboxes.forEach(cb => {
            cb.addEventListener('change', () => {
                const checked = Array.from(q5Checkboxes).filter(c => c.checked);
                if (checked.length > 2) {
                    cb.checked = false;
                    alert('Podes selecionar no mÃ¡ximo 2 opÃ§Ãµes.');
                }
            });
        });

        // Mostrar mensagem de sucesso se vier com ?success=true
        if (window.location.search.includes('success')) {
            document.getElementById('successMessage').style.display = 'block';
            document.querySelector('form').style.display = 'none';
        }
    </script>
</body>
</html>
